:root{
  --bg1:#f0f0f3; --bg2:#fafafa;
  --text:#222; --muted:#666; --accent:#000;
  --radius:16px; --shadow:0 8px 24px rgba(0,0,0,.18);
  --glass:rgba(255,255,255,.28); --glass-border:rgba(255,255,255,.35);
  --t: .6s cubic-bezier(.22,.61,.36,1);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font:16px/1.35 "Segoe UI",system-ui,Arial,sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  display:flex; flex-direction:column; align-items:center;
  overflow-x:hidden; padding:32px 16px;
}

/* Header / footer */
.page-header{text-align:center;margin-bottom:28px}
.page-header h1{font-size:2.1rem;margin-bottom:6px}
.subtitle-top{color:var(--muted);font-weight:500}
.page-footer{margin-top:28px}
.page-footer a{color:var(--accent);text-decoration:none;font-weight:600}
.page-footer a:hover{text-decoration:underline}

/* Coverflow container */
.coverflow-wrap{
  position:relative; width:min(1100px,92vw); height:420px;
  display:grid; place-items:center; perspective:1200px;
}
.stage{
  position:relative; width:100%; height:100%;
  transform-style:preserve-3d;
}

/* Cards */
.card{
  position:absolute; top:0; left:0;           /* anchor at (0,0) */
  width:320px; height:260px; transform-style:preserve-3d;
  border-radius:var(--radius); overflow:hidden; text-decoration:none;
  color:inherit; backface-visibility:hidden; outline:none;
  opacity:.6; filter:drop-shadow(0 10px 18px rgba(0,0,0,.16));
  transition: transform var(--t), opacity .35s ease, filter .35s ease;
  pointer-events:none;
}
.card-inner{
  position:relative; width:100%; height:100%;
  display:grid; grid-template-rows:1fr auto;
  animation:float 5.2s ease-in-out infinite; will-change:transform,filter;
}
.card img{
  width: 100%;
  height: 200px;
  object-fit: cover;
  position: relative;
  z-index: 1;
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
  overflow: hidden;
  display: block;
}

/* Reflection under image */
.card.is-active img::after {
  content: "";
  position: absolute;
  bottom: -200px;
  left: 0;
  width: 100%;
  height: 200px;
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
  background-image: inherit;
  background-size: cover;
  background-repeat: no-repeat;
  transform: scaleY(-1);
  opacity: 0.25;
  filter: blur(2px);
  mask-image: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
  -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
  pointer-events: none;
}

/* Frosted caption (glass) */
.glass-caption{
  justify-self:center; margin:8px 0 10px; padding:8px 14px;
  border-radius:12px; font-weight:600; letter-spacing:.2px;
  background:var(--glass); border:1px solid var(--glass-border);
  box-shadow:0 8px 24px rgba(0,0,0,.14), inset 0 1px 0 rgba(255,255,255,.45);
  backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
  transition:opacity .35s ease, transform .35s ease;
  opacity:.88;
}
.card.is-active .glass-caption{opacity:1; transform:translateY(-2px)}

/* Active pop */
.card.is-active{
  opacity:1;
  filter:drop-shadow(0 14px 28px rgba(0,0,0,.22));
}

/* --- Soft glow behind active card --- */
.card.is-active::before {
  content:"";
  position:absolute;
  bottom:-30px;
  left:50%;
  width:140%;
  height:80px;
  transform:translateX(-50%);
  background:radial-gradient(ellipse at center,
              rgba(255,255,255,0.55),
              rgba(255,255,255,0.05),
              transparent 70%);
  filter:blur(25px);
  opacity:0.9;
  pointer-events:none;
  z-index:-1;
  animation:glowPulse 4s ease-in-out infinite;
}

/* Floating illusion */
.card::after{
  content:""; position:absolute; left:50%; bottom:-14px;
  width:70%; height:18px; transform:translateX(-50%);
  border-radius:50%; pointer-events:none; filter:blur(6px);
  background:radial-gradient(closest-side, rgba(0,0,0,.22), rgba(0,0,0,0));
  opacity:.52; animation:shadowPulse 5.2s ease-in-out infinite;
}
.card:hover .card-inner, .card:hover::after{animation-play-state:paused}

@keyframes float{
  0%,100%{ transform:translateY(0) }
  50%{ transform:translateY(-10px) }
}
@keyframes shadowPulse{
  0%,100%{ transform:translateX(-50%) scale(1); opacity:.52 }
  50%{ transform:translateX(-50%) scale(.9); opacity:.40 }
}

/* Gentle breathing glow */
@keyframes glowPulse{
  0%,100% { opacity:0.9; filter:blur(25px); }
  50%     { opacity:0.7; filter:blur(35px); }
}

/* Nav buttons */
.nav{
  position:absolute; top:50%; transform:translateY(-50%);
  border:none; border-radius:50%; width:42px; height:42px;
  background:rgba(255,255,255,.7); backdrop-filter:blur(6px);
  box-shadow:var(--shadow); cursor:pointer; font-size:20px; line-height:42px;
  display:grid; place-items:center; user-select:none; z-index:5;
}
.nav:hover{background:#fff}
.prev{left:6px} .next{right:6px}

/* Responsive */
@media (max-width:768px){
  .card{width:270px; height:220px}
  .coverflow-wrap{height:380px}
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  .card-inner, .card::after, .card.is-active::before{animation:none!important}
}

/* Frosted caption (glass) */
.glass-caption {
  justify-self: center;
  margin: 10px 0 12px;
  padding: 10px 16px;
  border-radius: 14px;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.14),
              inset 0 1px 0 rgba(255, 255, 255, 0.45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  transition: opacity 0.35s ease, transform 0.35s ease;
  opacity: 0.9;
  max-width: 280px;
}

.glass-caption .title {
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 5px;
  color: #000;
}

.glass-caption .desc {
  font-weight: 400;
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.4;
}

.card.is-active .glass-caption {
  opacity: 1;
  transform: translateY(-4px);
}
